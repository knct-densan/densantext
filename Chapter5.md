# 5. 関数
## 目次
[5.1 関数の宣言と実行](#51-関数の宣言と実行)  
[5.2 関数の引数](#52-関数の引数)  
[5.3 関数の返り値](#53-関数の返り値)  
[演習問題](#演習問題)  

## 5.1 関数の宣言と実行
C言語は関数の組み合わせでつくられています。今まではprintfなどのあらかじめ用意された関数を呼びだしてプログラムをつくっていましたが、関数は自分でつくることもできます。関数の宣言は次のように行います。

```c
型 関数名(型 引数1, 型 引数2, …)
{
    処理
}
```

型は返り値(returnで返す値)の型にあわせなければなりません。関数名は変数と同じルールで命名することができます。引数とは、関数を実行する際に与えることのできる値のことです。
実際に書くと以下のようになります。

```c
int main()
{
    return 0;
}
```

今までのコードでも書いていたmainも関数です。C言語はmain関数が一番最初に実行されることでプログラムが動作します。また、上のソースのように引数を省略することも可能です。また、関数を呼びだすには以下のようにします。

```c
関数名(引数1, 引数2, …);
```

関数を呼びだすと、その関数内に記述された処理が実行されます。以下に例をあげます。

```c
#include <stdio.h>

void sum(int a, int b) //関数の宣言
{
    printf("%d\n", a + b); //3が出力される
}

int main()
{
    sum(1, 2); //関数の呼びだし
    
    return 0;
}
```

まず、void型の関数sumを宣言しています。void型は返り値の無い関数であることを表します。そして、main関数でsum関数を呼びだし、1と2を足した結果である3を出力しています。

自分でつくった関数はmain関数よりも先に宣言されていなければなりません。しかし、main関数よりも先に他の関数を書くのはプログラムが実行される流れと異なるのでソースを読みにくいものにしてしまう場合があります。そこで、main関数よりも後に他の関数を書くために宣言だけを先にすることができます。その宣言を **関数プロトタイプ** (プロトタイプ宣言)といいます。関数プロトタイプは以下のように書きます。

```c
型 関数名(型 引数1, 型 引数2, …);
```

関数宣言の{}とその中身を省略して `;` を書くことで関数プロトタイプになります。
実際に書くと以下のようになります。

```c
#include <stdio.h>

void sum(int a, int b); //関数プロトタイプ

int main()
{
    sum(1, 2); //関数の呼びだし
    
    return 0;
}

void sum(int a, int b) //関数の本体
{
    printf("%d\n", a + b);
}
```

関数プロトタイプでは引数の名前は省略することも、本体と違う名前をつけることもできます。以下の関数プロトタイプはすべて同じ意味を持ちます。

```c
void sum(int a, int b);

void sum(int, int);

void sum(int c, int d);
```

## 5.2 関数の引数
関数の引数について詳しく見ていきましょう。引数の数に制限はなく省略することもできます。また、関数を呼びだすときには、宣言時と同じ型のデータを同じ順番で渡さなければなりません。

```c
#include <stdio.h>

void func(int a, char b) //引数をint型, char型の順で宣言
{
    printf("%d, %c\n", a, b); //1, 2と出力される
}

int main()
{
    func(1, '2'); //値の型の種類と順番を宣言と合わせる
    
    return 0;
}
```

引数には変数を渡すこともできます。このとき渡す変数の名前と引数の名前は同じでも違っても問題ありません。

```c
#include <stdio.h>

void func(int a, char b)
{
    printf("%d, %c\n", a, b); //1, 2と出力される
}

int main()
{
    int a = 1;
    char c = '2';
    
    func(a, c); //引数aに変数aを、引数bに変数cを渡す
    return 0;
}
```

変数を引数に渡した場合には変数そのものではなく、変数の値だけが渡されます。例えば上の例のfunc関数の中で `a = 0` としてもmain関数のaの値は0にはならないので注意してください。

配列を引数にすることもできます。その場合の宣言と呼びだしは以下のようになります。

```c
void func(int a[], int b[5]); //関数の宣言。[]の中は書いても書かなくてもいい。

func(a, b); //関数の呼びだし。配列の名前だけを渡す。
```

ここで注意しなければいけないのは、変数の場合と異なり配列を引数に渡した場合には **配列そのものが渡される** ことです。なので上の例のfunc関数の中で配列aに代入してしまうとmain関数の配列aの値も変わってしまいます。

## 5.3 関数の返り値
次に関数の返り値について詳しく見ていきましょう。返り値を返すにはreturn文を使います。return文が実行されると関数は終了します。返り値は関数を呼びだした場所で受け取ることができます。以下にその例を示します。

```c
#include <stdio.h>

int func(int a, int b) //int型のfunc関数を宣言
{
    return a + b; //返り値の型を関数の型と合わせる
    printf("%d\n", a + b); //実行されない
}

int main()
{
    int sum;
    
    sum = func(1, 2); //返り値をsumに代入。sumの型もfuncの型と合わせる
    printf("%d\n", sum);
    
    return 0;
}
```

返り値を受け取るには以下のように書きます。

```c
sum = func(1, 2);
```

また、次のようにif文などの条件式でも使うことができます。

```c
if(func(1, 2) == 3){
    処理;
}
```

配列は返り値として返すことはできないと思ってください。コンパイルは通りますが、ほとんどの場合において意図した動きはしません。これは後で学ぶポインタに関係することなので、ポインタの章で詳しく解説します。(配列を引数にしたときの動作にも関係してきます。)
    
返り値について一通り説明したところで、main関数の `return 0` について少しだけ解説します。main関数の返り値は「プログラムがどのように終了したか」を表します。そして0というのはプログラムが正常に終了したことを表す値です。つまりmain関数で最後に `return 0` とするのはプログラムが正常に終了したことを表します。

## 演習問題
１. 引数x,yを持ち、xがyより大きければ1を、等しければ0を、小さければ-1を返す関数compを作成してください。

２. int型の配列を受け取り、0で初期化する関数を作成してください。