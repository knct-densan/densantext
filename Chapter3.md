# 3. 制御文
## 目次
[3.1 if文](#31-if文)  
[3.2 switch文](#32-switch文)  
[3.3 while文](#33-while文)  
[3.4 do-while文](#34-do-while文)  
[3.5 for文](#35-for文)  
[一覧表](#一覧表)  
[演習問題](#演習問題)  

## 3.1 if文
制御文とはプログラムの動きをコントロールするためのものです。if文は条件が満たされているかいないかで、処理を場合分けするときに用いられます。if文の書き方は次の通りです。

```c
if (条件式) {
    処理1;
} else {
    処理2;
}
```

if文は英語の意味の通り、**もしも条件式が成り立っていれば(if)「処理1」を行い、成り立っていなければ(else)「処理2」を行う**という解釈です。実際に書いてみると以下のようになります。

```c
#include <stdio.h>

int main()
{
    int x = 3;

    if (x > 2) {
        printf("xは2より大きいです。\n");
    } else {
        printf("xは2より小さいです。\n");
    }

    return 0;
}
```

条件式のところに `x > 2` が入っているのが分かります。これは「xは2より大きい」ということを表しています。xの中には3が入っており、実際は `3 > 2` ということを表しています。3は2より大きいのでこの条件式が成り立っていることが分かります。なので、このプログラムではif文の直後の

```c
printf("xは2より大きいです。\n");
```

だけが実行され、elseより後の

```c
printf("xは2より小さいです。\n");
```

は実行されません。このプログラムを実行すると `xは2より大きいです。` と表示されます。

では、

```c
int x = 3;
```

の部分を3ではなく1にするとどうなるでしょうか。このとき制御文は `1 > 2` となります。これでは式が成り立っていません。なので、このプログラムを実行すると `xは2より小さいです。` と表示されます。

条件式を作るとき、多く使われているのが**関係演算子**と**等価演算子**です。

**関係演算子**

|演算子|例        |解説                                                                |
|:----:|:--------:|:-------------------------------------------------------------------|
|<     |if (a < b) |aがbよりも小さければif文の中身を実行、そうでなければelseの中身を実行|
|>     |if (a > b) |aがbよりも大きければif文の中身を実行、そうでなければelseの中身を実行|
|<=    |if (a <= b)|aがb以下ならばif文の中身を実行、そうでなければelseの中身を実行      |
|>=    |if (a >= b)|aがb以上ならばif文の中身を実行、そうでなければelseの中身を実行      |

**等価演算子**

|演算子|例        |解説                                                              |
|:----:|:--------:|:-----------------------------------------------------------------|
|==    |if (a == b)|aとbが等しいならばif文の中身を実行、そうでなければelseの中身を実行|
|!=    |if (a != b)|aとbが異なるならばif文の中身を実行、そうでなければelseの中身を実行|

よくある間違えとして、 `a == b` を `a = b` と書いてしまう例があります。　C言語では数学と異なり `=` が代入、 `==` がイコールを意味します。もし、プログラムが自分の意図した動作をしないときはif文の条件式がこのようになっていないか確認してみてください。

if文では `else if ()` を使うことで3つ以上の分岐を行うこともできます。その場合は次のように書くことができます。

```c
if (条件式) {
    処理;
} else if (条件式) {
    処理;
} else if (条件式) {
    処理;
} else {
    処理;
}
```

これは条件式1が成り立っていなければ条件式2を判定し、条件式2が成り立っていなければ条件式3を判定というように上から順に条件式を判定していき、どの条件式も成り立たない場合は `else` の中の処理を行うというものです。どこかで条件式が成り立てばそこの処理が行われ、その下の条件式の判定や処理は行われません。 `else if ()` は何回でも使うことができます。

## 3.2 switch文
まず、次のようなコードを見てみましょう。

```c
#include <stdio.h>

int main()
{
    int x;

    puts("整数を入力してください。");
    scanf("%d", &x);

    if (x % 3 == 0) {
        puts("その数は3で割り切れます。");
    } else if (x % 3 == 1) {
        puts("その数を3で割った余りは1です。");
    } else {
        puts("その数を3で割った余りは2です。");
    }

    return 0;
}
```

上のプログラムは整数を入力して、その数字を3で割ったとき余りがいくらになるかを出力するプログラムです。しかし、このコードの制御文を見ると `x % 3 == 0` も `x % 3 == 1` も似たような式です。こういうときに使うのがswitch文です。

switch文を使って上のコードを書くと次のようになります。

```c
#include <stdio.h>

int main()
{
    int x;

    puts("整数を入力してください。");
    scanf("%d", &x);

    switch (x % 3) {
        case 0:
            puts("その数は3で割り切れます。");
            break;
        case 1:
            puts("その数を3で割った余りは1です。");
            break;
        case 2:
            puts("その数を3で割った余りは2です。");
            break;
    }

    return 0;
}
```

たとえば、 `x % 3` の値が1であれば、プログラムの流れは `case 1:` と書かれた目印へと移ります。その後は、そこに書かれている命令が1つずつ実行されていきます。ただし、break文と呼ばれる `break;` に出会うとプログラムの流れはswitch文を出ることになります。次のコードはswitch文をまとめたものです。

```c
#include <stdio.h>

int main()
{
    int x;

    puts("整数を入力してください");
    scanf("%d", &x);

    switch (x) {
        case 1:
            puts("A");
            puts("B");
            break;
        case 2:
            puts("C");
        case 5:
            puts("D");
            break;
        case 6:

        case 7:
            puts("E");
            break;
        default:
            puts("F");
            break;
    }

    return 0;
}
```

このプログラムを実行すると

1を入力したとき: A、B  
2を入力したとき: C、D  
3を入力したとき: F  
5を入力したとき: D  
6を入力したとき: E  

という結果が出力されます。 `case 2` や `case 6` のときはbreak文がないので、次の行の処理も実行します。 `default:` はswitch文に送られた整数がcaseのどの値とも一致しなかったときに処理するラベルです。なので3を入力したときには、どこにも飛ぶ場所がないのでdefaultに飛びます。

## 3.3 while文
次にプログラムの繰り返しについて学びます。その繰り返しを行うことができるのがwhile文です。while文の書き方は次の通りです。

```c
while (条件式) {
    処理；
}
```

条件式が成り立っているいるとき処理を繰り返し、成り立っていないとき処理を行うのをやめwhile文を出るという機能になっています。条件式の書き方はif文と同様です。では、実際にwhile文を使ったコードを紹介します。

```c
#include <stdio.h>

int main()
{
    int i = 0; //iを宣言と同時に初期化
    int n;

    puts("正の整数を入力してください");
    scanf("%d", &n);

    while (i <= n) {
        printf("%d", i++); //iを表示しインクリメント
    }
    
    putchar('\n');

    return 0;
}
```

上のプログラムは値を読み込み、その読み込んだ値の数だけ0からカウントアップしていくプログラムです。最初にiに0を代入し、次にiを表示させ、インクリメントする。iがnより小さいときは条件式が成り立っているのでwhile文の{}の中を繰り返す。iがn + 1の値になった時、条件式が成り立たなくなるのでwhile文を出る、という流れです。

もし上のコードでwhile文の条件式を1とだけ書くとどうなるでしょう。while文は1を条件式が成り立っている状態と判断し、永遠にwhile文の{}の中の処理を行うことになります。これを**無限ループ**といいます。

では、上のコードを無限ループを使って書き直してみます。

```c
#include <stdio.h>

int main()
{
    int i = 0; //iを宣言と同時に初期化
    int n;

    puts("正の整数を入力してください");
    scanf("%d", &n);

    while (1) {
        if (i > n) { //iがnより大きいならwhileを出る
            break;
        }
        printf("%d", i++); //iを表示しインクリメント
    }
    
    putchar('\n');

    return 0;
}
```

if文の中にbreak文があります。ここでもswitch文と同様に、break文に出会うとwhile文の外に出ることになります。

## 3.4 do-while文
do-while文という繰り返し命令があります。書き方は次の通りです。

```c
do {
    処理;
} while (条件式);
```

これは後判定ループと呼ばれ、名前の通り処理を行った後、制御文で判定を行います。while文との主な違いは処理を行う前から制御文が成り立っていなかった時、do-while文は1回だけ処理を行いwhile文は一回も処理を行わないことです。

while文の解説に使用したコードをdo-while文で書くと次のようになります。

```c
#include <stdio.h>

int main()
{
    int i = 0; //iを宣言と同時に初期化
    int n;

    puts("正の整数を入力してください");
    scanf("%d", &n);

    do {
        printf("%d", i++); //iを表示しインクリメント
    } while (i <= n);
    
    putchar('\n');

    return 0;
}
```

## 3.5 for文
for文はある一定の回数同じ処理を行うときに用いられる関数です。for文の書き方は次のとおりです。

```c
for (初期化; 条件式; 更新) {
    処理;
}
```

今までの制御文と比べて変わった書き方で分かりにくいので、説明する前に実際にfor文を使ったコードを見てみましょう。

```c
#include <stdio.h>

int main()
{
    int i, n; //iを初期化しなくてもよい

    puts("正の整数を入力してください");
    scanf("%d", &n);

    for (i = 0; i <= n; i++) {
        printf("%d", i); //iをインクリメントしない
    }
    
    putchar('\n'); //改行

    return 0;
}
```

for文は初期化→条件式判定→処理→更新→条件式判定→処理→更新……という流れで実行されます。変数の初期化とインクリメントなどの変数の更新処理をfor文の()の中で行うことができるので、 for文は一定回数の処理を行う場合にwhile文より簡単に、より見やすく書くことができます。

## 一覧表
**if文**

```c
if (条件式) {
    処理;
} else if (条件式) {
    処理;
} else {
    処理;
}
```

**switch文**

```c
switch (x) {
    case 1:
        処理;
        break;
    case 2:
        処理;
        break;
    default:
        処理;
        break;
}
```

**while文**

```c
while (条件式) {
    処理；
}
```

**do-while文**

```c
do {
    処理;
} while (条件式);
```

**for文**

```c
for (初期化; 条件式; 更新) {
    処理;
}
```

**関係演算子**

|演算子|例        |解説                                                                |
|:----:|:--------:|:-------------------------------------------------------------------|
|<     |if (a < b) |aがbよりも小さければif文の中身を実行、そうでなければelseの中身を実行|
|>     |if (a > b) |aがbよりも大きければif文の中身を実行、そうでなければelseの中身を実行|
|<=    |if (a <= b)|aがb以下ならばif文の中身を実行、そうでなければelseの中身を実行      |
|>=    |if (a >= b)|aがb以上ならばif文の中身を実行、そうでなければelseの中身を実行      |

**等価演算子**

|演算子|例        |解説                                                              |
|:----:|:--------:|:-----------------------------------------------------------------|
|==    |if (a == b)|aとbが等しいならばif文の中身を実行、そうでなければelseの中身を実行|
|!=    |if (a != b)|aとbが異なるならばif文の中身を実行、そうでなければelseの中身を実行|


## 演習問題
１. 1から250まで足した数をfor文を使って求めてください。

２. 整数を入力し、入力した値までの4の倍数を表示させるプログラムをwhile文とif文を使って作成してください。

```
入力例
20

出力例
4
8
12
16
20
```

３. 次のように出力するプログラムを作成してください。

```
＊
＊＊
＊＊＊
```

ヒント: for 文の中に for 文を作ってみると・・・
